# **Natural Language Inventory Query API**

A Flask-based backend that allows users to query an SQLite inventory database using **plain English**, powered by **Google Gemini Generative AI** as an NLP-to-SQL layer.

---

##  **Project Overview**

This project provides an HTTP API that accepts natural language queries (e.g., *"Show all products with quantity less than 10"*) and converts them into **safe, validated SQL queries** using Gemini.
The backend:

* Accepts requests via a URL like:
  **`http://127.0.0.1:5000/query?prompt=your_question_here`**
* Uses **Gemini API** to translate natural language → SQL
* Performs **SQL safety validation**
* Executes allowed SQL on a local **SQLite database (`inventory.db`)**
* Returns results in clean JSON format
* Rejects unsafe SQL (DROP, UPDATE, DELETE, semicolons, etc.)

---

##  **Tech Stack**

| Component         | Technology                                                  |
| ----------------- | ----------------------------------------------------------- |
| Backend Framework | Flask                                                       |
| Database          | SQLite                                                      |
| NLP Model         | Google Gemini API                                           |
| Python Packages   | `flask`, `sqlite3`, `google-generativeai`, `json`, `dotenv` |

---

##  **Project Structure**

```
project/
│── app.py
│── inventory.db
│── requirements.txt
```

---

##  **Environment Setup**

### 1. Install required Python packages

```bash
pip install -r requirements.txt
```

### 2. Create `.env` file

```env
GEMINI_API_KEY=your_api_key_here
```

---

##  **Running the API**

Start the Flask server:

```bash
python app.py
```

You should see:

```
Running on http://127.0.0.1:5000/
```

---

##  **How to Use the API**

### **Natural Language Query Example**

```
http://127.0.0.1:5000/query?prompt=show all items in the inventory
```

### **Example Response**

```json
{
  "sql": "SELECT * FROM inventory",
  "results": [
    {
      "id": 1,
      "item": "Keyboard",
      "quantity": 12,
      "location": "A1"
    }
  ]
}
```

---

##  **How SQL Safety Works**

We validate SQL generated by Gemini:

❌ Blocked:

* `DROP TABLE`
* `UPDATE`
* `DELETE`
* `INSERT`
* Multiple statements (`;`)
* Anything modifying schema or data

✔️ Allowed:

* `SELECT`
* `WHERE`
* `LIMIT`
* `ORDER BY`

If unsafe SQL is detected, response example:

```json
{
  "error": "Unsafe SQL generated!"
}
```
---

##  **Example Queries**

| Natural Language Input             | Generated SQL                                 |
| ---------------------------------- | --------------------------------------------- |
| "Show all products"                | `SELECT * FROM inventory`                     |
| "Items with quantity less than 10" | `SELECT * FROM inventory WHERE quantity < 10` |

---
